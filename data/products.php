<?php
$PRODUCTS = [
  [
    'id' => 'p1001',
    'name' => 'Organic Apples (1kg)',
    'price' => 399,
    'image' => 'https://images.unsplash.com/photo-1567306226416-28f0efdc88ce?w=600&q=80',
    'category' => 'Groceries',
    'vendor_id' => 'v001',
    'rating' => 4.6,
    'stock' => 120
  ],
  [
    'id' => 'p1002',
    'name' => 'Wireless Headphones',
    'price' => 5999,
    'image' => 'https://images.unsplash.com/photo-1518449078602-5ea1a1f18ebc?w=600&q=80',
    'category' => 'Electronics',
    'vendor_id' => 'v002',
    'rating' => 4.4,
    'stock' => 42
  ],
  [
    'id' => 'p1003',
    'name' => 'Denim Jacket',
    'price' => 7499,
    'image' => 'https://images.unsplash.com/photo-1542060748-10c28b62716c?w=600&q=80',
    'category' => 'Fashion',
    'vendor_id' => 'v003',
    'rating' => 4.2,
    'stock' => 65
  ],
  [
    'id' => 'p1004',
    'name' => 'Stainless Steel Cookware Set',
    'price' => 12999,
    'image' => 'https://images.unsplash.com/photo-1556911261-6bd341186b7d?w=600&q=80',
    'category' => 'Home',
    'vendor_id' => 'v004',
    'rating' => 4.5,
    'stock' => 20
  ],
  [
    'id' => 'p1005',
    'name' => 'Vitamin C Tablets',
    'price' => 1099,
    'image' => 'https://images.unsplash.com/photo-1598440947619-2c35fc9c9c1c?w=600&q=80',
    'category' => 'Health',
    'vendor_id' => 'v001',
    'rating' => 4.1,
    'stock' => 150
  ],
  [
    'id' => 'p1006',
    'name' => 'Instant Noodles (Masala)',
    'price' => 499,
    'image' => 'https://images.unsplash.com/photo-1512058564366-18510be2db19?w=600&q=80',
    'category' => 'Foods',
    'vendor_id' => 'v001',
    'rating' => 4.3,
    'stock' => 320
  ],
  [
    'id' => 'p1007',
    'name' => 'Ready-to-Eat Paneer Butter Masala',
    'price' => 1799,
    'image' => 'https://images.unsplash.com/photo-1625944527084-7a8e79fac3a0?w=600&q=80',
    'category' => 'Foods',
    'vendor_id' => 'v001',
    'rating' => 4.0,
    'stock' => 95
  ],
  [
    'id' => 'p1008',
    'name' => 'Herbal Face Wash',
    'price' => 2499,
    'image' => 'https://images.unsplash.com/photo-1585238342028-4bbc801c3a5f?w=600&q=80',
    'category' => 'Beauty',
    'vendor_id' => 'v003',
    'rating' => 4.2,
    'stock' => 210
  ],
  [
    'id' => 'p1009',
    'name' => 'Kids Building Blocks Set',
    'price' => 3299,
    'image' => 'https://images.unsplash.com/photo-1587654780291-39c9404d746b?w=600&q=80',
    'category' => 'Toys',
    'vendor_id' => 'v002',
    'rating' => 4.5,
    'stock' => 70
  ],
  [
    'id' => 'p1010',
    'name' => 'Cricket Bat (English Willow)',
    'price' => 79999,
    'image' => 'https://images.unsplash.com/photo-1601582585289-9c94b3b0cf96?w=600&q=80',
    'category' => 'Sports',
    'vendor_id' => 'v004',
    'rating' => 4.7,
    'stock' => 15
  ],
  [
    'id' => 'p1011',
    'name' => 'Car VacuÃ¼m Cleaner',
    'price' => 25999,
    'image' => 'https://images.unsplash.com/photo-1580273916550-e323be2ae537?w=600&q=80',
    'category' => 'Automotive',
    'vendor_id' => 'v002',
    'rating' => 4.1,
    'stock' => 38
  ],
  [
    'id' => 'p1012',
    'name' => 'Smartphone (128GB)',
    'price' => 249999,
    'image' => 'https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=600&q=80',
    'category' => 'Electronics',
    'vendor_id' => 'v002',
    'rating' => 4.6,
    'stock' => 55
  ],
  [
    'id' => 'p1013',
    'name' => 'Organic Basmati Rice (5kg)',
    'price' => 8999,
    'image' => 'https://images.unsplash.com/photo-1604908176997-4316521f5d8d?w=600&q=80',
    'category' => 'Groceries',
    'vendor_id' => 'v001',
    'rating' => 4.4,
    'stock' => 80
  ],
  [
    'id' => 'p1014',
    'name' => 'Air Fryer (3.5L)',
    'price' => 64999,
    'image' => 'https://images.unsplash.com/photo-1625944525826-3673dd5f829f?w=600&q=80',
    'category' => 'Home',
    'vendor_id' => 'v004',
    'rating' => 4.3,
    'stock' => 27
  ],
  [
    'id' => 'p1015',
    'name' => 'Chicken Biryani (Regular)',
    'price' => 24999,
    'image' => 'https://images.unsplash.com/photo-1604908554007-98b2c6ac1e56?w=600&q=80',
    'category' => 'Foods',
    'vendor_id' => 'v001',
    'rating' => 4.5,
    'stock' => 50
  ],
  [
    'id' => 'p1016',
    'name' => 'Margherita Pizza (Medium)',
    'price' => 32999,
    'image' => 'https://images.unsplash.com/photo-1542281286-9e0a16bb7366?w=600&q=80',
    'category' => 'Foods',
    'vendor_id' => 'v002',
    'rating' => 4.3,
    'stock' => 40
  ],
  [
    'id' => 'p1017',
    'name' => 'Veg Burger Combo',
    'price' => 19999,
    'image' => 'https://images.unsplash.com/photo-1550547660-d9450f859349?w=600&q=80',
    'category' => 'Foods',
    'vendor_id' => 'v003',
    'rating' => 4.2,
    'stock' => 60
  ],
  [
    'id' => 'p1018',
    'name' => 'Chicken Momos (10 pcs)',
    'price' => 14999,
    'image' => 'https://images.unsplash.com/photo-1625944534009-2d6ad1a7d8c9?w=600&q=80',
    'category' => 'Foods',
    'vendor_id' => 'v004',
    'rating' => 4.4,
    'stock' => 70
  ],
  [
    'id' => 'p1019',
    'name' => 'Masala Dosa',
    'price' => 12999,
    'image' => 'https://images.unsplash.com/photo-1625944529705-4f5dca9e50a1?w=600&q=80',
    'category' => 'Foods',
    'vendor_id' => 'v001',
    'rating' => 4.6,
    'stock' => 80
  ],
];

function get_products(array $opts = []) : array {
  global $PRODUCTS;
  $items = $PRODUCTS;
  if(isset($opts['category'])){
    $items = array_values(array_filter($items, fn($p)=> $p['category']===$opts['category']));
  }
  if(isset($opts['q'])){
    $q = strtolower(trim($opts['q']));
    $items = array_values(array_filter($items, fn($p)=> str_contains(strtolower($p['name']), $q)));
  }
  return $items;
}

function get_product(string $id) : ?array {
  global $PRODUCTS;
  foreach($PRODUCTS as $p){ if($p['id']===$id) return $p; }
  return null;
}

?>


